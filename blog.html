<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>News & Updates | GEDP</title>
    <meta name="description"
        content="Latest news, updates, and insights from the Ghana Education Digital Platform (GEDP).">
    <link rel="icon" type="image/x-icon" href="/GEDP-fav.png">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600&family=Outfit:wght@300;700&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="./style.css">
    <link rel="stylesheet" href="./responsive.css">
    <script type="module" src="./main.js"></script>
</head>

<body>

    <div id="page-loader" class="page-loader">
        <div class="loader-content">
            <img src="/GEDP.png" alt="GEDP" class="loader-logo">
            <div class="loader-spinner"></div>
        </div>
    </div>

    <div class="top-bar">
        <div class="container flex justify-between align-center">
            <span class="top-bar-title">Ghana Education Digital Platform — Let's All Evolve Together</span>
            <div class="top-bar-contact">
                <a href="mailto:info@gedp.gov.gh">
                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        style="margin-right: 6px; vertical-align: middle;">
                        <path d="m22 2-7 20-4-9-9-4Z" />
                        <path d="M22 2 11 13" />
                    </svg>
                    info@gedp.gov.gh
                </a>
            </div>
        </div>
    </div>

    <!-- Navigation bar -->
    <header class="header sticky-nav header-glass-blueblack">
        <div class="container nav-wrapper">
            <div class="logo">
                <a href="index.html">
                    <img src="/GEDP.png" alt="GEDP Logo" class="logo-image">
                </a>
            </div>

            <nav class="main-nav" id="mainNav">
                <ul>
                    <li><a href="modules.html" class="nav-link">Modules</a></li>
                    <li><a href="portals.html" class="nav-link">External Portals</a></li>
                    <li><a href="blog.html" class="nav-link active">News</a></li>
                    <li><a href="about.html" class="nav-link">About Us</a></li>

                    <!-- Mobile Only Buttons -->
                    <li class="mobile-only-btn">
                        <a href="#login" class="nav-link btn-link">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" style="margin-right: 8px;">
                                <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4" />
                                <polyline points="10 17 15 12 10 7" />
                                <line x1="15" y1="12" x2="3" y2="12" />
                            </svg>
                            Login
                        </a>
                    </li>
                </ul>
            </nav>

            <div class="nav-actions">
                <button class="btn btn-primary mobile-hide pill-btn">
                    Login
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        style="margin-left: 10px;">
                        <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4" />
                        <polyline points="10 17 15 12 10 7" />
                        <line x1="15" y1="12" x2="3" y2="12" />
                    </svg>
                </button>

                <button class="hamburger-new" id="hamburger" aria-label="Toggle menu">
                    <div class="hamburger-dot-grid">
                        <span></span>
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </button>
            </div>
        </div>
    </header>

    <main style="padding-top: 100px; background-color: #F8FAFC;">
        <!-- Featured News Slider -->
        <section class="featured-news-section">
            <div class="container">
                <div class="featured-slider-container" id="featuredSlider">
                    <!-- Slides will be injected here -->
                </div>
            </div>
        </section>

        <!-- News & Updates Section Header -->
        <section style="padding: 4rem 0 2rem 0; background-color: #F8FAFC;" class="news-updates-header">
            <div class="container">
                <h2 style="font-size: 2.5rem; font-weight: 700; color: var(--primary); white-space: nowrap;">News &
                    Updates</h2>
            </div>
        </section>

        <!-- Blog Feed -->
        <section class="blog-feed-section" style="padding: 2rem 0 6rem 0; background-color: #F8FAFC;">
            <div class="container">
                <div class="grid grid-3" id="blogGrid" style="gap: 2.5rem;">
                    <!-- Articles will be loaded from CMS -->
                </div>
            </div>
        </section>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const defaultArticles = [
                {
                    id: 'new-1',
                    title: 'GES Promotion Examination Centres 2025 – Check Here!',
                    img: '/New%20Images/bece.jpg',
                    cat: 'Announcement',
                    excerpt: 'The GES has officially released the Promotion Examination Centres. Check your region and centre details here.',
                    date: 'February 17, 2026',
                    readTime: '5 min read',
                    link: 'blog-post.html?id=new-1&v=13',
                    featured: true
                },
                {
                    id: 'new-2',
                    title: 'Director General for GES, Prof. E.K.Davies Announces Bold Reforms to Boost Credibility of 2025 BECE School Selection',
                    img: '/director3.jpg',
                    cat: 'News',
                    excerpt: 'Prof. E.K.Davies introduces targeted reforms to strengthen transparency and accountability in the 2025 BECE school selection process.',
                    date: 'February 17, 2026',
                    readTime: '6 min read',
                    link: 'blog-post.html?id=new-2&v=12',
                    featured: true
                },
                {
                    id: 'new-3',
                    title: 'Why Professor Davis and the Minister of Education deserve national commendation',
                    img: '/haruna4.jpg',
                    cat: 'News',
                    excerpt: 'Education stakeholders laud the success of the 2025 BECE and CSSPS as one of the most transparent in history.',
                    date: 'February 17, 2026',
                    readTime: '7 min read',
                    link: 'blog-post.html?id=new-3&v=8',
                    featured: true
                },
                {
                    id: 'new-4',
                    title: 'Engage with stakeholders to deliver robust digital education policy – Haruna to GES Council',
                    img: '/haruna3.jpg',
                    cat: 'News',
                    excerpt: 'The GES Council has been tasked to develop Ghana’s first-ever comprehensive Digital Education Policy by early 2026.',
                    date: 'February 17, 2026',
                    readTime: '8 min read',
                    link: 'blog-post.html?id=new-4&v=9',
                    featured: true
                },
                {
                    id: 'new-5',
                    title: 'Government to commit ¢1bn to school infrastructure in 2026 – Education Minister',
                    img: '/haruna2.jpg',
                    cat: 'News',
                    excerpt: 'The government will inject GH₵1 billion from the GETFund in 2026 to address infrastructure challenges and eliminate the double-track system.',
                    date: 'February 17, 2026',
                    readTime: '5 min read',
                    link: 'blog-post.html?id=new-5&v=10',
                    featured: true
                },
                {
                    id: 'new-6',
                    title: 'GES 2025 Posting for Staff Returning from Study Leave with Pay – Check Here!',
                    img: '/male-shaking-hands.jpg',
                    cat: 'News',
                    excerpt: 'GES has announced the posting process for staff returning from study leave with pay. Applications are open until Nov 7, 2025.',
                    date: 'February 17, 2026',
                    readTime: '6 min read',
                    link: 'blog-post.html?id=new-6&v=11',
                    featured: true
                }
            ];
            const grid = document.getElementById('blogGrid');
            const sliderContainer = document.getElementById('featuredSlider');
            const storedPosts = localStorage.getItem('gedp_articles');
            let articles = storedPosts ? JSON.parse(storedPosts) : defaultArticles;

            // Non-destructive update: Ensure latest articles exist and are updated to v=11
            let articlesUpdated = false;
            defaultArticles.forEach(defArt => {
                const existingIndex = articles.findIndex(a => a.id === defArt.id);
                if (existingIndex === -1) {
                    articles.unshift(defArt); // Add if missing
                    articlesUpdated = true;
                } else if (!articles[existingIndex].link.includes('v=11')) {
                    articles[existingIndex] = defArt; // Update if old version
                    articlesUpdated = true;
                }
            });

            if (articlesUpdated) {
                localStorage.setItem('gedp_articles', JSON.stringify(articles));
            }

            // --- Featured Slider Logic ---
            let migrationNeeded = false;
            articles.forEach(a => {
                if (a.img === '/Haruna-Iddrisu.webp') {
                    a.img = '/haruna4.jpg';
                    migrationNeeded = true;
                }
            });

            // Fallback: If no articles are featured (legacy data), feature the first 3
            if (!articles.some(a => a.featured)) {
                articles.forEach((a, idx) => { if (idx < 3) a.featured = true; });
                migrationNeeded = true;
            }

            if (migrationNeeded) {
                localStorage.setItem('gedp_articles', JSON.stringify(articles));
            }

            const featuredArticles = articles.filter(a => a.featured).slice(0, 4);
            let currentFeatIndex = 0;

            function renderFeaturedSlides() {
                sliderContainer.innerHTML = '';

                featuredArticles.forEach((art, idx) => {
                    const params = new URLSearchParams({ id: art.id, title: art.title, img: art.img, cat: art.cat });
                    const url = `blog-post.html?${params.toString()}`;

                    const slide = document.createElement('div');
                    slide.className = `featured-slide ${idx === 0 ? 'active' : ''}`;
                    slide.style.backgroundColor = '#0F172A'; // Dark background for text visibility
                    slide.style.minHeight = '400px'; // Ensure height since image is gone
                    slide.style.cursor = 'pointer';
                    slide.onclick = () => window.location.href = url;

                    // News & Update Badge
                    const brandBadge = document.createElement('div');
                    brandBadge.className = 'featured-brand-badge';
                    brandBadge.innerHTML = `<span style="font-size: 0.75rem; font-weight: 600; color: #fff; text-transform: uppercase; letter-spacing: 0.05em;">News & Update</span>`;
                    slide.appendChild(brandBadge);

                    // Image restored
                    const img = document.createElement('img');
                    img.src = art.img;
                    img.alt = art.title;
                    img.className = 'featured-img';
                    slide.appendChild(img);


                    const overlay = document.createElement('div');
                    overlay.className = 'featured-overlay';
                    slide.appendChild(overlay);

                    const content = document.createElement('div');
                    content.className = 'featured-content';

                    content.innerHTML = `
                        <span class="featured-badge">${art.cat}</span>
                        <h2 class="featured-title">${art.title}</h2>
                        <div class="featured-meta">
                            <span>${art.date}</span>
                            <span>|</span>
                            <span>${art.readTime || '5 min read'}</span>
                        </div>
                    `;

                    slide.appendChild(content);
                    sliderContainer.appendChild(slide);
                });
            }

            function showSlide(index) {
                const slides = sliderContainer.querySelectorAll('.featured-slide');
                const lastIndex = currentFeatIndex;

                currentFeatIndex = (index + slides.length) % slides.length;

                slides.forEach((s, idx) => {
                    // Reset all
                    s.classList.remove('active', 'prev-slide', 'next-slide');

                    if (idx === currentFeatIndex) {
                        s.classList.add('active');
                    } else if (idx === lastIndex) {
                        s.classList.add('prev-slide');
                    } else {
                        // All other slides stay ready at the right
                        s.classList.add('next-slide');
                    }
                });
            }

            if (featuredArticles.length > 0) {
                renderFeaturedSlides();

                // Auto advance every 5 seconds
                setInterval(() => showSlide(currentFeatIndex + 1), 5000);
            } else {
                sliderContainer.closest('.featured-news-section').style.display = 'none';
            }

            // --- Blog Grid Logic ---
            articles.forEach((art, index) => {
                const articleEl = document.createElement('article');
                articleEl.className = 'module-card hide-reveal clickable-news-card';
                articleEl.style.cssText = `padding: 0; overflow: hidden; background: white; border-radius: 16px; transition-delay: ${0.1 * (index + 1)}s; opacity: 1; transform: translateY(0); cursor: pointer;`;

                const params = new URLSearchParams({ id: art.id, title: art.title, img: art.img, cat: art.cat });
                const articleUrl = `blog-post.html?${params.toString()}`;

                articleEl.setAttribute('onclick', `window.location.href='${articleUrl}'`);

                articleEl.innerHTML = `
                    <div style="height: 240px; overflow: hidden;">
                        <img src="${art.img}" alt="${art.title}" style="width: 100%; height: 100%; object-fit: cover; transition: transform 0.5s ease;">
                    </div>
                    <div class="news-card-body">
                        <span style="font-size: 0.8rem; font-weight: 600; color: var(--secondary); text-transform: uppercase; letter-spacing: 0.05em;">${art.cat}</span>
                        <h3>${art.title}</h3>
                        <p style="margin-bottom: 1.5rem;">${art.excerpt}</p>
                        <a href="${articleUrl}" class="read-more-btn" style="margin-top: auto;" onclick="event.stopPropagation();">Read Full Article &rarr;</a>
                    </div>
                `;
                grid.appendChild(articleEl);
            });
        });
    </script>

    <!-- Footer -->
    <footer id="contact" class="footer bg-primary text-white">
        <div class="container pb-2">
            <div class="footer-links-minimal">
                <a href="gallery.html" class="nav-link-footer">Gallery</a>
                <a href="#" class="nav-link-footer">Download Full Manual</a>
                <a href="privacy.html" class="nav-link-footer">Privacy & Cookies</a>
                <a href="terms.html" class="nav-link-footer">Terms Of Use</a>
                <a href="#" class="nav-link-footer">Contact Us</a>
            </div>
            <div class="footer-bottom text-center">
                <p>&copy; 2026 Ghana Education Digital Platform. All rights reserved.</p>
            </div>
        </div>
    </footer>

</body>

</html>